<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Me KSA Form</title>
    <link rel="stylesheet" href="form.css">
</head>
<body>
    <div>
        <h1>
            Call me KSA
        </h1>
        <hr class="rounded" />
        <form id="form" name = "form" autocomplete="off" onSubmit="return ValidateActInsert()" action="https://knu.dasistjaabsolutnichtmehrinmo.de/post.php" method="post" >
            <h3 id="error"></h3>
            <div id="first_name_container" class="input-container">
                <label for="html">First Name</label><br>
                <input  id="first_name" name="first_name"></input>
            </div>
            <div id="last_name_container" class="input-container">
                <label for="html">Last Name</label><br>
                <input id="last_name" name="last_name"></input>
            </div>
            <div id="birthday_container" class="input-container invisible">
                <label for="html">Birthday</label><br>
                <input id="birthday" name="birthday"></input>
            </div>
            <div id="nationality_container" class="input-container invisible">
                <label for="html">Nationality</label><br>
                <input id="nationality" name="nationality"></input>
            </div>
            <div id="mbti_container" class="input-container invisible">
                <label for="html">MBTI</label><br>
                <input id="mbti" name="mbti"></input>
            </div>
            <div id="hobby_container" class="input-container invisible">
                <label for="html">Hobbys</label><br>
                <input id="hobby_1" name="hobby_1"></input>
                <input id="hobby_2" name="hobby_2"></input>
                <input id="hobby_3" name="hobby_3"></input>
            </div>
            <div id="language_container" class="input-container invisible">
                <label for="html">Languages</label><br>
                <input id="language_1" name="language_1"></input>
                <input id="language_2" name="language_2"></input>
                <input id="language_3" name="language_3"></input>
            </div>
            <div id="question_1_container" class="input-container invisible">
                <label for="html">Question 1</label><br>
                <select name="question_1" id="question_1">
                    <option value="1">What is your favorite Halloween Costume?</option>
                    <option value="2">What is your favorite Halloween Costume?</option>
                    <option value="3">What is your favorite Halloween Costume?</option>
                    <option value="4">What is your favorite Halloween Costume?</option>
                </select>
                <input id="answer_1" name="answer_1"></input>
            </div>
            <div id="question_2_container" class="input-container invisible">
                <label for="html">Question 2</label><br>
                <select name="question_2" id="question_2">
                    <option value="1">Whould you rather fight 100 ducksize <br> horses or one horse size duck</option>
                    <option value="2">Saab</option>
                    <option value="3">Mercedes</option>
                    <option value="4">Audi</option>
                  </select>
                <input id="answer_2" name="answer_2"></input>
            </div>
            <div id="contact_insta_container" class="input-container invisible">
                <label for="html">Instagram Id</label><br>
                <input id="contact_insta" name="contact_insta"></input>
            </div>
            <div id="contact_kakao_container" class="input-container invisible">
                <label for="html">Kakao Id</label><br>
                <input id="contact_kakao" name="contact_kakao"></input>
            </div>
            <div id="user_code_container" class="input-container invisible">
                <label for="html">User Code</label><br>
                <input id="user_code" name="user_code" value="123456" ></input>
            </div>
            <div class="button_container">
                <button 
                    type="button" 
                    class="invisible"
                    id="prev_button"
                    >Previous
                </button>
                <button 
                    type="button" 
                    id="next_button"
                    >Next
                </button>
                <button 
                    type="submit" 
                    class="invisible"
                    id="submit_button"
                    >Submit
                </button>
            </div>
        </form>
    </div>
    <script>

        // declaration of variables
        let index = 1;

        // get data from url quary
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
            });

            if(params.error==="true") {
                console.log(params.error)
                document.getElementById("error").innerHTML = "The Usercode is already taken";
                document.getElementById("user_code").className = document.getElementById("user_code").className + " error";
                document.getElementById("first_name").value = params.first_name
                document.getElementById("first_name").value = params.first_name
                document.getElementById("last_name").value = params.last_name
                document.getElementById("birthday").value = params.birthday
                document.getElementById("nationality").value = params.nationality
                document.getElementById("mbti").value = params.mbti
                document.getElementById("hobby_1").value = params.hobby_1
                document.getElementById("hobby_2").value = params.hobby_2
                document.getElementById("hobby_3").value = params.hobby_3
                document.getElementById("language_1").value = params.language_1
                document.getElementById("language_2").value = params.language_2
                document.getElementById("language_3").value = params.language_3
                document.getElementById("question_1").value = params.question_1
                document.getElementById("answer_1").value = params.answer_1
                document.getElementById("question_2").value = params.question_2
                document.getElementById("answer_2").value = params.answer_2
                document.getElementById("contact_insta").value = params.contact_insta
                document.getElementById("contact_kakao").value = params.contact_kakao
                document.getElementById("user_code").value = params.user_code
            }



             //validate inputs
             function ValidateActInsert(event) {
                var specialChars = /[^a-zA-Z0-9 ]/g;
                if (document.form.first_name.value.match(specialChars)) {
                    // event.prevetnDefault()
                    alert ("Only characters A-Z, a-z and 0-9 are allowed!")
                    document.form.first_name.focus();
                    return false;
                }
                return (true);
            }   

            //handles changing index
            function handleDOMChanges(index) {
                index === 1 ? document.getElementById("first_name_container").className = "input-container" :  document.getElementById("first_name_container").className = document.getElementById("first_name_container").className + " invisible"
                index === 1 ? document.getElementById("last_name_container").className = "input-container" :  document.getElementById("last_name_container").className = document.getElementById("last_name_container").className + " invisible"
                index === 2 ? document.getElementById("birthday_container").className = "input-container" :  document.getElementById("birthday_container").className = document.getElementById("birthday_container").className + " invisible"
                index === 2? document.getElementById("nationality_container").className = "input-container" :  document.getElementById("nationality_container").className = document.getElementById("nationality_container").className + " invisible"
                index === 2 ? document.getElementById("mbti_container").className = "input-container" :  document.getElementById("mbti_container").className = document.getElementById("mbti_container").className + " invisible"
                index === 3 ? document.getElementById("hobby_container").className = "input-container" :  document.getElementById("hobby_container").className = document.getElementById("hobby_container").className + " invisible"
                index === 3 ? document.getElementById("language_container").className = "input-container" :  document.getElementById("language_container").className = document.getElementById("language_container").className + " invisible"
                index === 4 ? document.getElementById("question_1_container").className = "input-container" :  document.getElementById("question_1_container").className = document.getElementById("question_1_container").className + " invisible"
                index === 4 ? document.getElementById("question_2_container").className = "input-container" :  document.getElementById("question_2_container").className = document.getElementById("question_2_container").className + " invisible"
                index === 5 ? document.getElementById("contact_insta_container").className = "input-container" :  document.getElementById("contact_insta_container").className = document.getElementById("contact_insta_container").className + " invisible"
                index === 5 ? document.getElementById("contact_kakao_container").className = "input-container" :  document.getElementById("contact_kakao_container").className = document.getElementById("contact_kakao_container").className + " invisible"
                index === 6 ? document.getElementById("user_code_container").className = "input-container" : document.getElementById("user_code_container").className = document.getElementById("user_code_container").className + " invisible"
                index !== 1 ? document.getElementById("prev_button").className = "" :  document.getElementById("prev_button").className = document.getElementById("prev_button").className + " invisible"
                index !== 6 ? document.getElementById("next_button").className = "" :  document.getElementById("next_button").className = document.getElementById("next_button").className + " invisible"
                index === 6 ? document.getElementById("submit_button").className = "" :  document.getElementById("submit_button").className = document.getElementById("submit_button").className + " invisible"
            }
            
            //navigate throug profile
            function handleNext(event) {
                event.preventDefault()
                  index = index + 1
                handleDOMChanges(index)
                console.log(index)
                return null
            }

            document.getElementById("next_button").addEventListener("click", handleNext, false)
            
            function handlePrevious(event) {
                event.preventDefault()
                index--
                handleDOMChanges(index)
                console.log(index)
                return null
            }

            document.getElementById("prev_button").addEventListener("click", handlePrevious, false)



       
    </script>
</body>
</html>


